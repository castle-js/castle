!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Castle=e():t.Castle=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/dist/",e(0)}([function(t,e,n){t.exports=n(9)},function(t,e){"use strict";t.exports={attemptToMutateProp:function(t,e){return Error("Attempt to mutate property “"+e+"” of immutable “"+t+"”")},collectionNoData:function(t){return new Error("No data provided for “"+t+"” Collection")},collectionSetBadIndex:function(t,e,n){return new Error("Can't set "+t+"["+e+"] lower than ("+n+"), otherwise undefined elements would occur")},dictionaryNoData:function(t){return new Error("No data provided for “"+t+"” Dictionary")},iCollectionNoTypeDefined:function(t){return new Error("“"+t+"” class “type” static property must be instance of Dictionary constructor")},iDictiomaryNoSchemaDefined:function(t){return new Error("“"+t+"” class “schema” static property must be an object")},iDictiomaryDefaultsIsNotAnObject:function(t){return new Error("“"+t+"” class “defaults” static property must be an object or undefined")},staticSetterNoArgument:function(t,e){return new Error("Argument for “"+e+"” of class "+t+" wasn't provided")},staticSetterSecondCall:function(t,e){return new Error("Attempted to call “"+e+"” on class “"+t+"” twice")},staticSetterPropertyPresent:function(t,e,n){return new Error("Attempted to call “"+e+"” on class “"+t+"” that aleady "+("has “"+n+"” static property"))},staticSetterCalledOnBaseClass:function(t,e){return new Error("Attempted to call “"+e+"” on class “"+t+"” itself")},extensionNoKeyInChildStaticObject:function(t,e,n,r){return new Error("Incorrect extension: didn't found key “"+e+"” in static propery object “"+t+"” "+("of class “"+r+"”, that extends class “"+n+"”"))},extensionDifferentTypeOfKeyInChildStaticObject:function(t,e,n,r,o,i){return new Error("Incorrect extension: tried to override property “"+e+"” of type type with property "+("of type “"+n+"” with property of type “"+r+"” type in static object ")+("“"+t+"” of class “"+i+"”, that extends class “"+o+"”"))},extensionOwerridenKeyWithNotInstance:function(t,e,n,r,o){return new Error("Incorrect extension: tried to override property “"+e+"” with not an instance "+("of “"+n+"” type in static object “"+t+"” ")+("of class “"+o+"”, that extends class “"+r+"”"))}}},function(t,e){"use strict";function n(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function r(t){function e(e,n,r,o,i,c){if(o=o||d,i=i||"prop",c=c||r,null==n[r]){var s=y[i];return e===!1?new Error("Required "+s+" `"+c+"` was not specified in `"+o+"`."):null}return t(n,r,o,i,c)}var n=e.bind(null,!1);return n.isRequired=n,n.optional=e.bind(null,!0),n}function o(t){function e(e,n,r,o,i){var c=e[n],s=u(c);if(s!==t){var a=y[o],p=f(c);return new Error("Invalid "+a+" `"+i+"` of type `"+p+"` supplied to `"+r+"`, expected `"+t+"`.")}return null}return r(e)}function i(t){function e(e,n,r,o,i){var c=e[n];if(!Array.isArray(c)){var s=y[o];return new Error("Invalid "+s+" `"+i+"` of type `"+u(c)+"` supplied to `"+r+"`, expected an array.")}for(var a=0;a<c.length;a++){var f=t(c,a,r,o,i+"["+a+"]");if(f instanceof Error)return f}return null}return r(e)}function c(t){function e(e,n,r,o,i){if(!(e[n]instanceof t)){var c=y[o],s=t.name||d;return new Error("Invalid "+c+" `"+i+"` of type `"+p(e[n])+"` supplied to `"+r+"`, expected instance of `"+s+"`.")}return null}return r(e)}function s(t){function e(e,n,r,o,i){var c=e[n];switch(!0){case c instanceof t:return null;case"Object"==p(c):var s=null;return t.serialize(c,function(t){return s=t},function(t){return e[n]=t}),s;default:var a=y[o],u=t.name||d;return new Error("Invalid "+a+" `"+i+"` of type `"+p(c)+"` supplied to `"+r+"`, expected instance of `"+u+"` or an `object`.")}}return r(e)}function a(t){function e(e,n,r,o,i){var c=e[n];switch(!0){case c instanceof t:return null;case Array.isArray(c):var s=null;return c.__environment={componentName:r,location:o,propFullName:i},t.serialize(c,function(t){return s=t},function(t){return e[n]=t}),s;default:var a=y[o],u=t.name||d;return new Error("Invalid "+a+" `"+i+"` of type `"+p(c)+"` supplied to `"+r+"`, expected instance of `"+u+"` or an `array`.")}}return r(e)}function u(t){var e="undefined"==typeof t?"undefined":n(t);return Array.isArray(t)?"array":t instanceof RegExp?"object":e}function f(t){var e=u(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function p(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var l={array:o("array"),bool:o("boolean"),func:o("function"),number:o("number"),object:o("object"),string:o("string"),arrayOf:i,instanceOf:c,dictionary:s,collection:a},y={prop:"prop",context:"context",childContext:"child context"},d="<<anonymous>>";t.exports=l},function(t,e){"use strict";t.exports={serializing:"undefined"!=typeof Symbol?Symbol("serializing"):"@@serializing_77XCBNtDTHRoQh",underlay:"undefined"!=typeof Symbol?Symbol("underlay"):"@@underlay_r4aXfTnyHY3Wsv",serializationError:"undefined"!=typeof Symbol?Symbol("serializationError"):"@@serializationError_MYeWVx8fUeEn6R",staticObjectsExtensionValidated:"undefined"!=typeof Symbol?Symbol("staticObjectsExtensionValidated"):"@@staticObjectsExtensionValidated_QZavPj4c2WZWEv",skipInit:"undefined"!=typeof Symbol?Symbol("skipInit"):"@@skipInit_sZVH9hN8JUZRJH",dictionaryType:"undefined"!=typeof Symbol?Symbol("dictionaryType"):"@@dictionaryType_RaW6LsdMQE9DcE",schema:"undefined"!=typeof Symbol?Symbol("schema"):"@@schema_wWacoLy2grQ4zh",defaults:"undefined"!=typeof Symbol?Symbol("defaults"):"@@defaults_yiccdDv3wNTV3T",saveValidatedData:"undefined"!=typeof Symbol?Symbol("saveValidatedData"):"@@saveValidatedData_bukUE7EdMVqTH3"}},function(t,e,n){"use strict";function Dictionary(t){if(!this.constructor[c.skipInit]){if(this.constructor.hasOwnProperty("schema")){var e=this.constructor.schema;delete this.constructor.schema,this.constructor.setSchema(e)}if(this.constructor.hasOwnProperty("defaults")){var n=this.constructor.defaults;delete this.constructor.defaults,this.constructor.setDefaults(n)}var r=this.constructor[c.schema],o=this.constructor[c.defaults]||{};if(r instanceof Object==!1)throw console.log(this.constructor),i.iDictiomaryNoSchemaDefined(this.constructor.name);if(o instanceof Object==!1)throw i.iDictiomaryDefaultsIsNotAnObject(this.constructor.name);var s=a(r,o,t,this.constructor.name);if(s instanceof Error){if(this.constructor[c.serializing]!==!0)throw s;this[c.serializationError]=s}else this[c.underlay]=s,u(this,r)}}var r=n(13),o=n(2),i=n(1),c=n(3),s=n(5),a=n(12),u=function(t,e){var n=function(n){e.hasOwnProperty(n)&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return this[c.underlay][n]},set:function(){return console.warn(i.attemptToMutateProp(t.constructor.name,n))}})};for(var r in e)n(r)},f=function(t){t.constructor[c.skipInit]=!0;var e=new t.constructor;return t.constructor[c.skipInit]=!1,e[c.underlay]={},Object.assign(e[c.underlay],t[c.underlay]),e};Dictionary.extend=n(6),Dictionary.serialize=n(7),Dictionary.getTypeChecker=function(){return o.dictionary(this)},Dictionary.setSchema=s("setSchema","schema",c.schema,Dictionary),Dictionary.setDefaults=s("setDefaults","defaults",c.defaults,Dictionary),Dictionary[c.schema]={},Dictionary[c.defaults]={},Dictionary.getTypeChecker=function(){return o.dictionary(this)},Dictionary.prototype.get=function(t){return this[c.underlay][t]},Dictionary.prototype.set=function(t,e,n){var r=this.constructor[c.schema][t];if(null==r)return this;var o=r([e],0,this.constructor.name,null,t);if(o)return"function"==typeof n?n(o):console.warn(o),this;var i=f(this);return i[c.underlay][t]=e,u(i,this.constructor[c.schema]),i},Dictionary.prototype.deepEqual=function(t){return r(this[c.underlay],t[c.underlay])},t.exports=Dictionary},function(t,e,n){"use strict";function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var o=n(1);t.exports=function(t,e,n,i){var c="undefined"!=typeof Symbol?Symbol(e+"_wasSet"):"@@"+e+"_wasSet_s4yAMAsweUm6Nq";return function(s){if(null==s)throw o.staticSetterNoArgument(this.name,t);if(this.hasOwnProperty(c))throw o.staticSetterSecondCall(this.name,t);if(this.hasOwnProperty(e))throw o.staticSetterPropertyPresent(this.name,t,e);if(this===i)throw o.staticSetterCalledOnBaseClass(this.name,t);this[n]=s,Object.defineProperty(this,c,{value:!0,enumerable:!1,configurable:!1,writable:!1});var a=this.constructor[n],u=Object.getPrototypeOf(this.constructor.prototype),f=u&&u.constructor[n];if(f instanceof Object)for(var p in f)if(f.hasOwnProperty(p)){var l=a[p],y=f[p];if(null!=y&&null==l)throw o.extensionNoKeyInChildStaticObject(e,p,u.constructor.name,this.constructor.name);if(("undefined"==typeof l?"undefined":r(l))!==("undefined"==typeof y?"undefined":r(y)))throw o.extensionDifferentTypeOfKeyInChildStaticObject(e,p,"undefined"==typeof y?"undefined":r(y),"undefined"==typeof l?"undefined":r(l),u.constructor.name,this.constructor.name);if("function"==typeof y&&l instanceof y==!1)throw o.extensionOwerridenKeyWithNotInstance(e,p,f.constructor.name,u.constructor.name,this.constructor.name)}return this}}},function(t,e){"use strict";function n(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}t.exports=function(){var t=Array.prototype.slice.call(arguments),e=this,r=void 0,o=void 0,i=void 0,c=void 0;"string"==typeof t[0]&&(o=t.splice(0,1)[0]),"function"==typeof t[0]&&(r=t.splice(0,1)[0],o=o||r.name),"object"===n(t[0])&&(i=t.splice(0,1)[0],"object"===n(i.props)&&(c=i.props,i.props=void 0)),c||"object"!==n(t[0])||(c=t.splice(0,1)[0]),r=r||function(){},o=o||(e.name||"ANONYMOUS")+"__extended",c=c||{},i=i||{},void 0!==t[0]&&console.error("Too much arguments given in ");var s=new Function("return function (pureConstructor, superClass, props) {\n            return function "+o.match(/[\w\d_$]*/g).join("")+" () {\n                superClass.apply(this, arguments);\n                pureConstructor.apply(this, arguments);\n                for (var p in props) if (props.hasOwnProperty(p)) this[p] = props[p];\n            };\n        };")()(r,e,c);for(var a in e)e.hasOwnProperty(a)&&(s[a]=e[a]);for(var a in i)i.hasOwnProperty(a)&&(s[a]=i[a]);return s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),s}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e,n){this[r.serializing]=!0;var o=new this(t);return this[r.serializing]=!1,null!=o[r.serializationError]?("function"==typeof e&&e(o[r.serializationError]),null):("function"==typeof n&&n(o),o)}},function(t,e,n){"use strict";function Collection(t){if(!this.constructor[i.skipInit]){if(this.constructor.hasOwnProperty("type")){var e=this.constructor.type;delete this.constructor.type,this.constructor.setType(e)}var n=this.constructor[i.dictionaryType];if("function"!=typeof n||n.prototype instanceof Dictionary==!1&&n!==Dictionary)throw o.iCollectionNoTypeDefined(this.constructor.name);var r=s(n,t,this.constructor.name);if(r instanceof Error){if(this.constructor[i.serializing]!==!0)throw r;this[i.serializationError]=r}else this[i.underlay]=r,a(this)}}var Dictionary=n(4),r=n(2),o=n(1),i=n(3),c=n(5),s=n(11),a=function(t){t[i.underlay].forEach(function(e,n){Object.defineProperty(t,n,{enumerable:!0,get:function(){return this[i.underlay][n]},set:function(){return console.warn(o.attemptToMutateProp(t.constructor.name,prop))}})}),Object.defineProperty(t,"length",{value:t[i.underlay].length})},u=function(t){t.constructor[i.skipInit]=!0;var e=new t.constructor;return t.constructor[i.skipInit]=!1,e[i.underlay]=t[i.underlay].slice(),e};Collection.extend=n(6),Collection.serialize=n(7),Collection.getTypeChecker=function(){return r.collection(this)},Collection.setType=c("setType","type",i.dictionaryType,Collection),Collection[i.dictionaryType]=Dictionary,Collection.prototype.deepEqual=function(t){if(!t||!t.constructor||t.constructor!==this.constructor)return!1;for(var e in this[i.underlay])if(this[i.underlay][e].deepEqual(t[i.underlay][e])===!1)return!1;return!0},Collection.prototype.get=function(t){return this[i.underlay][t]},Collection.prototype.set=function(t,e,n){if(t<=this.length==!1)return"function"==typeof n?n(o.collectionSetBadIndex(this.constructor.name,t,this.length)):console.warn(o.collectionSetBadIndex(this.constructor.name,t,this.length)),this;var c=r.dictionary(this.constructor[i.dictionaryType])(arguments,1,this.constructor[i.dictionaryType].name,null,this.constructor.name+"["+t+"]");if(c)return"function"==typeof n?n(c):console.warn(c),this;var s=u(this);return s[i.underlay][t]=e,a(s),s},Collection.prototype.slice=function(){var t=u(this);return t[i.underlay]=Array.prototype.slice.apply(t[i.underlay],arguments),a(t),t},Collection.prototype.pop=function(){var t=u(this);return t[i.underlay]=Array.prototype.pop.apply(t[i.underlay],arguments),a(t),t},Collection.prototype.forEach=function(){return Array.prototype.forEach.apply(this[i.underlay],arguments)},Collection.prototype.map=function(){return Array.prototype.map.apply(this[i.underlay],arguments)},Collection.prototype.filter=function(){return Array.prototype.filter.apply(this[i.underlay],arguments)},Collection.prototype.sort=function(){return Array.prototype.sort.apply(this[i.underlay],arguments)},Collection.prototype.reduce=function(){return Array.prototype.reduce.apply(this[i.underlay],arguments)},t.exports=Collection,Dictionary.createCollection=function(t,e,n){return t=t||(this.name.match(/_extended$/i)?"Collection_extended":this.name.slice(0,-1)+(this.name.match(/[^$_aeiou]y$/i)?"ies":"s")+"Collection"),Collection.extend(t,e,n).setType(this)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),Dictionary=n(4),Collection=n(8);n(10),e["default"]={PropTypes:r,Dictionary:Dictionary,Collection:Collection},e.PropTypes=r,e.Dictionary=Dictionary,e.Collection=Collection},function(t,e){"use strict";!function(){function t(){var t="";return this===Function||this===Function.prototype.constructor?t="Function":this!==Function.prototype&&(t=(""+this).replace(e,"").replace(n,"")),t}var e=/^[\S\s]*?function\s*/,n=/[\s\(\/][\S\s]+$/,r=!("name"in Function.prototype&&"name"in function(){}),o="function"==typeof Object.defineProperty&&function(){var t;try{Object.defineProperty(Function.prototype,"_xyz",{get:function(){return"blah"},configurable:!0}),t="blah"===Function.prototype._xyz,delete Function.prototype._xyz}catch(e){t=!1}return t}();Function.prototype._name=t,o&&r&&Object.defineProperty(Function.prototype,"name",{get:t})}()},function(t,e,n){"use strict";var r=n(1);t.exports=function(t,e,n){if(null==e||Array.isArray(e)===!1)throw r.collectionNoData(n);for(var o=null,i=0;i<e.length;i++){switch(!0){case e[i]instanceof t:break;default:if(null!=e.__environment){var c=e.__environment;o=t.getTypeChecker()(e,i,c.componentName,c.location,c.propFullName+"["+i+"]")}else o=t.getTypeChecker()(e,i,n)}if(null!=o)return o}return e}},function(t,e,n){"use strict";var r=n(1);t.exports=function(t,e,n,o){if(null==n||n instanceof Object==!1)throw r.dictionaryNoData(o);var i={};for(var c in t)if(t.hasOwnProperty(c)){null==n[c]?null!=e[c]&&(i[c]=e[c]):i[c]=n[c];var s=t[c](i,c,o);if(s)return s}return i}},function(t,e,n){function r(t){return null===t||void 0===t}function o(t){return t&&"object"==typeof t&&"number"==typeof t.length?"function"!=typeof t.copy||"function"!=typeof t.slice?!1:t.length>0&&"number"!=typeof t[0]?!1:!0:!1}function i(t,e,n){var i,f;if(r(t)||r(e))return!1;if(t.prototype!==e.prototype)return!1;if(a(t))return a(e)?(t=c.call(t),e=c.call(e),u(t,e,n)):!1;if(o(t)){if(!o(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var p=s(t),l=s(e)}catch(y){return!1}if(p.length!=l.length)return!1;for(p.sort(),l.sort(),i=p.length-1;i>=0;i--)if(p[i]!=l[i])return!1;for(i=p.length-1;i>=0;i--)if(f=p[i],!u(t[f],e[f],n))return!1;return typeof t==typeof e}var c=Array.prototype.slice,s=n(15),a=n(14),u=t.exports=function(t,e,n){return n||(n={}),t===e?!0:t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:i(t,e,n)}},function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=o?n:r,e.supported=n,e.unsupported=r},function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}e=t.exports="function"==typeof Object.keys?Object.keys:n,e.shim=n}])});