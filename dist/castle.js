!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],r):"object"==typeof exports?exports.Castle=r(require("immutable")):t.Castle=r(t.immutable)}(this,function(t){return function(t){function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var e={};return r.m=t,r.c=e,r.p="/dist/",r(0)}([function(t,r,e){t.exports=e(13)},function(t,r){(function(r){"use strict";t.exports={serializing:r.Symbol?Symbol("serializing"):"@@serializing_77XCBNtDTHRoQh",underlyingIterable:r.Symbol?Symbol("underlyingIterable"):"@@underlyingIterable_r4aXfTnyHY3Wsv",serializationError:r.Symbol?Symbol("serializationError"):"@@serializationError_MYeWVx8fUeEn6R"}}).call(r,function(){return this}())},function(t,r){(function(r){"use strict";t.exports=function(t,e,n,o){var i=r.Symbol?Symbol(e+"_wasSet"):"@@"+e+"_wasSet_s4yAMAsweUm6Nq";return function(r){if(void 0===r)throw new Error(this.name+"."+t+": argument wasn't provided");if(this.hasOwnProperty(i))throw new Error("Attempted to call `"+t+"` twice on `"+this.name+"`");if(null==r)throw new Error(this.name+"."+t+": no argument provided");if(this.hasOwnProperty(e))throw new Error("Attempted to call `"+t+"` on class `"+this.name+"` that aleady has `shema` static property");if(this===o)throw new Error("Attempted to call `"+t+"` on `"+o.name+"` itself");return this[n]=r,Object.defineProperty(this,i,{value:!0,enumerable:!1,configurable:!1,writable:!1}),this}}}).call(r,function(){return this}())},function(t,r){"use strict";function e(t){function r(r,e,n,o,i,s){if(o=o||y,i=i||"prop",s=s||n,null==e[n]){var a=p[i];return r===!1?new Error("Required "+a+" `"+s+"` was not specified in `"+o+"`."):null}return t(e,n,o,i,s)}var e=r.bind(null,!1);return e.isRequired=e,e.optional=r.bind(null,!0),e}function n(t){function r(r,e,n,o,i){var s=r[e],a=c(s);if(a!==t){var l=p[o],f=u(s);return new Error("Invalid "+l+" `"+i+"` of type `"+f+"` supplied to `"+n+"`, expected `"+t+"`.")}return null}return e(r)}function o(t){function r(r,e,n,o,i){var s=r[e];if(!Array.isArray(s)){var a=p[o];return new Error("Invalid "+a+" `"+i+"` of type `"+c(s)+"` supplied to `"+n+"`, expected an array.")}for(var u=0;u<s.length;u++){var l=t(s,u,n,o,i+"["+u+"]");if(l instanceof Error)return l}return null}return e(r)}function i(t){function r(r,e,n,o,i){if(!(r[e]instanceof t)){var s=p[o],a=t.name||y;return new Error("Invalid "+s+" `"+i+"` of type `"+l(r[e])+"` supplied to `"+n+"`, expected instance of `"+a+"`.")}return null}return e(r)}function s(t){function r(r,e,n,o,i){var s=r[e];switch(!0){case s instanceof t:return null;case"Object"==l(s):var a=null;return t.serialize(s,function(t){return a=t},function(t){return r[e]=t}),a;default:var c=p[o],u=t.name||y;return new Error("Invalid "+c+" `"+i+"` of type `"+l(s)+"` supplied to `"+n+"`, expected instance of `"+u+"` or an `object`.")}}return e(r)}function a(t){function r(r,e,n,o,i){var s=r[e];switch(!0){case s instanceof t:return null;case Array.isArray(s):var a=null;return s.__environment={componentName:n,location:o,propFullName:i},t.serialize(s,function(t){return a=t},function(t){return r[e]=t}),a;default:var c=p[o],u=t.name||y;return new Error("Invalid "+c+" `"+i+"` of type `"+l(s)+"` supplied to `"+n+"`, expected instance of `"+u+"` or an `array`.")}}return e(r)}function c(t){var r=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":r}function u(t){var r=c(t);if("object"===r){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return r}function l(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var f={array:n("array"),bool:n("boolean"),func:n("function"),number:n("number"),object:n("object"),string:n("string"),arrayOf:o,instanceOf:i,immutableDictionary:s,immutableCollection:a},p={prop:"prop",context:"context",childContext:"child context"},y="<<anonymous>>";t.exports=f},function(t,r){"use strict";t.exports={immutableJsUnavailable:function(){return new Error("Immutable.js is not available. Make it requirable as `immutable` if using AMD/CommonJS/SystemJS, otherwise add it to the global object as `Immutable`. https://facebook.github.io/immutable-js/")},collectionNoData:function(t){return new Error("No data provided for "+t+" Collection")},dictionaryNoData:function(t){return new Error("No data provided for "+t+" Dictionary")}}},function(t,r){"use strict";t.exports=function(){var t=Array.prototype.slice.call(arguments),r=this,e=void 0,n=void 0,o=void 0,i=void 0;"string"==typeof t[0]&&(n=t.splice(0,1)[0]),"function"==typeof t[0]&&(e=t.splice(0,1)[0],n=n||e.name),"object"==typeof t[0]&&(o=t.splice(0,1)[0],"object"==typeof o.props&&(i=o.props,o.props=void 0)),i||"object"!=typeof t[0]||(i=t.splice(0,1)[0]),e=e||function(){},n=n||(r.name||"ANONYMOUS")+"__extended",i=i||{},o=o||{},void 0!==t[0]&&console.error("Too much arguments given in ");var s=new Function("return function (pureConstructor, superClass, props) {\n            return function "+n+" () {\n                superClass.apply(this, arguments);\n                pureConstructor.apply(this, arguments);\n                for (var p in props) if (props.hasOwnProperty(p)) this[p] = props[p];\n            };\n        };")()(e,r,i);for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);return s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),s}},function(t,r,e){"use strict";var n=e(1);t.exports=function(t,r,e){this[n.serializing]=!0;var o=new this(t);return this[n.serializing]=!1,null!=o[n.serializationError]?("function"==typeof r&&r(o[n.serializationError]),null):("function"==typeof e&&e(o),o)}},function(t,r,e){"use strict";function ImmutableBase(){}var n=e(1);ImmutableBase.extend=e(5),ImmutableBase.serialize=e(6),ImmutableBase.prototype.get=function(t,r){return this[n.underlyingIterable].get(t,r)},ImmutableBase.prototype.equals=function(t){return this[n.underlyingIterable].equals(t[n.underlyingIterable])},ImmutableBase.prototype.toMap=function(){return this[n.underlyingIterable].toMap()},t.exports=ImmutableBase},function(t,r,e){(function(r){"use strict";var n,o=e(3),ImmutableBase=e(7),i=e(4),s=e(16),a=e(2),c=e(15),u={serializing:e(1).serializing,underlyingIterable:e(1).underlyingIterable,serializationError:e(1).serializationError,skipInit:r.Symbol?Symbol("skipInit"):"@@skipInit_kafEW2P3GCenbu",schema:r.Symbol?Symbol("schema"):"@@schema_wWacoLy2grQ4zh",defaults:r.Symbol?Symbol("defaults"):"@@defaults_yiccdDv3wNTV3T"},l=t.exports=ImmutableBase.extend("ImmutableDictionary",function(t){if(n=n||e(9)||r.Immutable,null==n)throw i.immutableJsUnavailable();if(!this.constructor[u.skipInit]){if(this.constructor.hasOwnProperty("schema")){var o=this.constructor.schema;delete this.constructor.schema,this.constructor.setSchema(o)}if(this.constructor.hasOwnProperty("defaults")){var a=this.constructor.defaults;delete this.constructor.defaults,this.constructor.setDefaults(a)}s.call(this.constructor.prototype,u.schema),s.call(this.constructor.prototype,u.defaults);var l=this.constructor[u.schema]||{},f=this.constructor[u.defaults]||{};if(l instanceof Object==!1)throw new Error("`"+this.name+"`: schema is undefined or not an object");var p=c(l,f,t,this.constructor.name);if(p instanceof Error){if(this.constructor[u.serializing]!==!0)throw p;this[u.serializationError]=p}else this[u.underlyingIterable]=n.Map(p)}});l.setSchema=a("setSchema","schema",u.schema,l),l.setDefaults=a("setDefaults","defaults",u.defaults,l),l[u.schema]={},l[u.defaults]={},l.prototype.set=function(t,r,e){var n=this.constructor.schema[t];if(null==n)return this;var o=n([r],0,this.constructor.name,null,t);if(o)return"function"==typeof e&&e(o),this;this.constructor[u.skipInit]=!0;var i=new this.constructor;return this.constructor[u.skipInit]=!1,i[u.underlyingIterable]=this[u.underlyingIterable].set(t,r),i},l.getTypeChecker=function(){return o.immutableDictionary(this)}}).call(r,function(){return this}())},function(r,e){r.exports=t},function(t,r,e){"use strict";function Collection(){}var n=e(1),o=e(2);Collection.prototype=Object.create(Array.prototype,{constructor:{value:Collection,enumerable:!1,writable:!0,configurable:!0}}),Collection.extend=e(5),Collection.serialize=e(6),Collection.setType=o("setType","type",n.type,Collection),t.exports=Collection},function(t,r,e){"use strict";function n(){}var o=e(1),i=e(2);n.extend=e(5),n.serialize=e(6),n.setSchema=i("setSchema","schema",o.schema,n),n.setDefaults=i("setDefaults","defaults",o.defaults,n),t.exports=n},function(t,r,e){(function(r){"use strict";var n,o=e(3),ImmutableBase=e(7),i=e(8),s=e(2),a=e(14),c={serializing:e(1).serializing,underlyingIterable:e(1).underlyingIterable,serializationError:e(1).serializationError,skipInit:r.Symbol?Symbol("skipInit"):"@@skipInit_sZVH9hN8JUZRJH",type:r.Symbol?Symbol("type"):"@@type_RaW6LsdMQE9DcE"},u=t.exports=ImmutableBase.extend("ImmutableCollection",function(t){if(n=n||e(9)||r.Immutable,null==n)throw Errors.immutableJsUnavailable();if(!this.constructor[c.skipInit]){if(this.constructor.hasOwnProperty("type")){var o=this.constructor.type;delete this.constructor.type,this.constructor.setType(o)}var s=this.constructor[c.type]||{};if("function"!=typeof s||s.prototype instanceof i==!1&&s!==i)throw new Error("`type` static propry must be a ImmutableDictionary constructor");var u=a(s,t,this.constructor.name);if(u instanceof Error){if(this.constructor[c.serializing]!==!0)throw u;this[c.serializationError]=u}else this[c.underlyingIterable]=n.List(u)}});u[c.type]=i,u.setType=s("setType","type",c.type,u),u.getTypeChecker=function(){return o.immutableCollection(this)},u.prototype.set=function(t,r,e){var n=o.immutableDictionary(this.constructor.type)(arguments,1,this.constructor.type.name);if(n)return"function"==typeof e&&e(n),this;this.constructor[c.skipInit]=!0;var i=new this.constructor;return this.constructor[c.skipInit]=!1,i[c.underlyingIterable]=this[c.underlyingIterable].set(t,arguments[1]),i}}).call(r,function(){return this}())},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(3),o=e(11),Collection=e(10),i=e(8),s=e(12),a={PropTypes:n,Dictionary:o,Collection:Collection,ImmutableDictionary:i,ImmutableCollection:s};r.Castle=a,r.PropTypes=n,r.Dictionary=o,r.Collection=Collection,r.ImmutableDictionary=i,r.ImmutableCollection=s},function(t,r,e){"use strict";var n=e(4);t.exports=function(t,r,e){if(null==r||Array.isArray(r)===!1)throw n.collectionNoData(e);for(var o=null,i=0;i<r.length;i++){switch(!0){case r[i]instanceof t:break;default:if(null!=r.__environment){var s=r.__environment;o=t.getTypeChecker()(r,i,s.componentName,s.location,s.propFullName+"["+i+"]")}else o=t.getTypeChecker()(r,i,e)}if(null!=o)return o}return r}},function(t,r,e){"use strict";var n=e(4);t.exports=function(t,r,e,o){if(null==e||e instanceof Object==!1)throw n.dictionaryNoData(o);var i={};for(var s in t)if(t.hasOwnProperty(s)){null==e[s]?null!=r[s]&&(i[s]=r[s]):i[s]=e[s];var a=t[s](i,s,o);if(a)return a}return i}},function(t,r){"use strict";t.exports=function e(t){var r=this.constructor[t],n=Object.getPrototypeOf(this.constructor.prototype);if(null!=n){var o=n.constructor[t];if(o instanceof Object)for(var i in o)if(o.hasOwnProperty(i)){var s=r[i],a=o[i];if(null!=a&&null==s)throw new Error("Incorrect extension: didn't found key “"+i+"” in static propery object “"+t+"” of class “"+this.constructor.name+"”, that extends class “"+n.constructor.name+"”");if(typeof s!=typeof a)throw new Error("Incorrect extension: tried to override key “"+i+"” of type "+typeof a+" with key of type "+typeof s+" in static propery object “"+t+"” of class “"+this.constructor.name+"”, that extends class “"+n.constructor.name+"”");if("object"==typeof a&&"function"==typeof o.constructor&&s instanceof o.constructor==!1)throw new Error("Incorrect extension: tried to override property “"+i+"” with not an instance of "+o.constructor+" in static propery object “"+t+"” of class “"+this.constructor.name+"”, that extends class “"+n.constructor.name+"”");r[i]=a}e.call(n,t)}}}])});