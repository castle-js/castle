!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],e):"object"==typeof exports?exports.Castle=e(require("immutable")):t.Castle=e(t.immutable)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="/dist/",e(0)}([function(t,e,r){t.exports=r(16)},function(t,e){"use strict";t.exports={immutableJsUnavailable:function(){return Error("Immutable.js is not available. Make it requirable as `immutable` if using AMD/CommonJS/SystemJS, otherwise add it to the global object as `Immutable`. https://facebook.github.io/immutable-js/")},collectionNoData:function(t){return new Error("No data provided for “"+t+"” Collection")},dictionaryNoData:function(t){return new Error("No data provided for “"+t+"” Dictionary")},iCollectionNoTypeDefined:function(t){return new Error("“"+t+"” class “type” static property must be instance of ImmutableDictionary constructor")},iDictiomaryNoSchemaDefined:function(t){return new Error("“"+t+"” class “schema” static property must be an object")},iDictiomaryDefaultsIsNotAnObject:function(t){return new Error("“"+t+"” class “defaults” static property must be an object or undefined")},staticSetterNoArgument:function(t,e){return new Error("Argument for “"+e+"” of class "+t+" wasn't provided")},staticSetterSecondCall:function(t,e){return new Error("Attempted to call “"+e+"” on class “"+t+"” twice")},staticSetterPropertyPresent:function(t,e,r){return new Error("Attempted to call “"+e+"” on class “"+t+"” that aleady "+("has “"+r+"” static property"))},staticSetterCalledOnBaseClass:function(t,e){return new Error("Attempted to call “"+e+"” on class “"+t+"” itself")},extensionNoKeyInChildStaticObject:function(t,e,r,n){return new Error("Incorrect extension: didn't found key “"+e+"” in static propery object “"+t+"” "+("of class “"+n+"”, that extends class “"+r+"”"))},extensionDifferentTypeOfKeyInChildStaticObject:function(t,e,r,n,o,i){return new Error("Incorrect extension: tried to override property “"+e+"” of type type with property "+("of type “"+r+"” with property of type “"+n+"” type in static object ")+("“"+t+"” of class “"+i+"”, that extends class “"+o+"”"))},extensionOwerridenKeyWithNotInstance:function(t,e,r,n,o){return new Error("Incorrect extension: tried to override property “"+e+"” with not an instance "+("of “"+r+"” type in static object “"+t+"” ")+("of class “"+o+"”, that extends class “"+n+"”"))}}},function(t,e){(function(e){"use strict";t.exports={serializing:e.Symbol?Symbol("serializing"):"@@serializing_77XCBNtDTHRoQh",underlyingIterable:e.Symbol?Symbol("underlyingIterable"):"@@underlyingIterable_r4aXfTnyHY3Wsv",serializationError:e.Symbol?Symbol("serializationError"):"@@serializationError_MYeWVx8fUeEn6R",staticObjectsExtensionValidated:e.Symbol?Symbol("staticObjectsExtensionValidated"):"@@staticObjectsExtensionValidated_QZavPj4c2WZWEv",skipInit:e.Symbol?Symbol("skipInit"):"@@skipInit_sZVH9hN8JUZRJH",dictionaryType:e.Symbol?Symbol("dictionaryType"):"@@dictionaryType_RaW6LsdMQE9DcE",assertDictionaryTypeValid:e.Symbol?Symbol("assertDictionaryTypeValid"):"@@assertDictionaryTypeValid_bukUE7EdMVqTH3",schema:e.Symbol?Symbol("schema"):"@@schema_wWacoLy2grQ4zh",defaults:e.Symbol?Symbol("defaults"):"@@defaults_yiccdDv3wNTV3T",saveValidatedData:e.Symbol?Symbol("saveValidatedData"):"@@saveValidatedData_bukUE7EdMVqTH3"}}).call(e,function(){return this}())},function(t,e,r){(function(e){"use strict";var n=r(1);t.exports=function(t,r,o,i){var a=e.Symbol?Symbol(r+"_wasSet"):"@@"+r+"_wasSet_s4yAMAsweUm6Nq";return function(e){if(null==e)throw n.staticSetterNoArgument(this.name,t);if(this.hasOwnProperty(a))throw n.staticSetterSecondCall(this.name,t);if(this.hasOwnProperty(r))throw n.staticSetterPropertyPresent(this.name,t,r);if(this===i)throw n.staticSetterCalledOnBaseClass(this.name,t);this[o]=e,Object.defineProperty(this,a,{value:!0,enumerable:!1,configurable:!1,writable:!1});var s=this.constructor[o],c=Object.getPrototypeOf(this.constructor.prototype),u=c&&c.constructor[o];if(u instanceof Object)for(var l in u)if(u.hasOwnProperty(l)){var f=s[l],p=u[l];if(null!=p&&null==f)throw n.extensionNoKeyInChildStaticObject(r,l,c.constructor.name,this.constructor.name);if(typeof f!=typeof p)throw n.extensionDifferentTypeOfKeyInChildStaticObject(r,l,typeof p,typeof f,c.constructor.name,this.constructor.name);if("function"==typeof p&&f instanceof p==!1)throw n.extensionOwerridenKeyWithNotInstance(r,l,u.constructor.name,c.constructor.name,this.constructor.name)}return this}}}).call(e,function(){return this}())},function(t,e){"use strict";t.exports=function(){var t=Array.prototype.slice.call(arguments),e=this,r=void 0,n=void 0,o=void 0,i=void 0;"string"==typeof t[0]&&(n=t.splice(0,1)[0]),"function"==typeof t[0]&&(r=t.splice(0,1)[0],n=n||r.name),"object"==typeof t[0]&&(o=t.splice(0,1)[0],"object"==typeof o.props&&(i=o.props,o.props=void 0)),i||"object"!=typeof t[0]||(i=t.splice(0,1)[0]),r=r||function(){},n=n||(e.name||"ANONYMOUS")+"__extended",i=i||{},o=o||{},void 0!==t[0]&&console.error("Too much arguments given in ");var a=new Function("return function (pureConstructor, superClass, props) {\n            return function "+n+" () {\n                superClass.apply(this, arguments);\n                pureConstructor.apply(this, arguments);\n                for (var p in props) if (props.hasOwnProperty(p)) this[p] = props[p];\n            };\n        };")()(r,e,i);for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);for(var s in o)o.hasOwnProperty(s)&&(a[s]=o[s]);return a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),a}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t,e,r){this[n.serializing]=!0;var o=new this(t);return this[n.serializing]=!1,null!=o[n.serializationError]?("function"==typeof e&&e(o[n.serializationError]),null):("function"==typeof r&&r(o),o)}},function(t,e){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(t,e){for(var i,a,s=r(t),c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var u in i)n.call(i,u)&&(s[u]=i[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(i);for(var l=0;l<a.length;l++)o.call(i,a[l])&&(s[a[l]]=i[a[l]])}}return s}},function(t,e,r){"use strict";function Dictionary(t){if(this.constructor.hasOwnProperty("schema")){var e=this.constructor.schema;delete this.constructor.schema,this.constructor.setSchema(e)}if(this.constructor.hasOwnProperty("defaults")){var r=this.constructor.defaults;delete this.constructor.defaults,this.constructor.setDefaults(r)}var n=this.constructor[i.schema],a=this.constructor[i.defaults]||{};if(n instanceof Object==!1)throw console.log(this.constructor),o.iDictiomaryNoSchemaDefined(this.constructor.name);if(a instanceof Object==!1)throw o.iDictiomaryDefaultsIsNotAnObject(this.constructor.name);var c=s(n,a,t,this.constructor.name);if(c instanceof Error){if(this.constructor[i.serializing]!==!0)throw c;this[i.serializationError]=c}else this[i.saveValidatedData](c)}var n=r(6),o=r(1),i=r(2),a=r(3),s=r(13);Dictionary.extend=r(4),Dictionary.serialize=r(5),Dictionary.getTypeChecker=function(){return PropTypes.dictionary(this)},Dictionary.setSchema=a("setSchema","schema",i.schema,Dictionary),Dictionary.setDefaults=a("setDefaults","defaults",i.defaults,Dictionary),Dictionary[i.schema]={},Dictionary[i.defaults]={},Dictionary.prototype[i.saveValidatedData]=function(t){n(this,t)},t.exports=Dictionary},function(t,e){"use strict";function r(t){function e(e,r,n,o,i,a){if(o=o||y,i=i||"prop",a=a||n,null==r[n]){var s=p[i];return e===!1?new Error("Required "+s+" `"+a+"` was not specified in `"+o+"`."):null}return t(r,n,o,i,a)}var r=e.bind(null,!1);return r.isRequired=r,r.optional=e.bind(null,!0),r}function n(t){function e(e,r,n,o,i){var a=e[r],s=c(a);if(s!==t){var l=p[o],f=u(a);return new Error("Invalid "+l+" `"+i+"` of type `"+f+"` supplied to `"+n+"`, expected `"+t+"`.")}return null}return r(e)}function o(t){function e(e,r,n,o,i){var a=e[r];if(!Array.isArray(a)){var s=p[o];return new Error("Invalid "+s+" `"+i+"` of type `"+c(a)+"` supplied to `"+n+"`, expected an array.")}for(var u=0;u<a.length;u++){var l=t(a,u,n,o,i+"["+u+"]");if(l instanceof Error)return l}return null}return r(e)}function i(t){function e(e,r,n,o,i){if(!(e[r]instanceof t)){var a=p[o],s=t.name||y;return new Error("Invalid "+a+" `"+i+"` of type `"+l(e[r])+"` supplied to `"+n+"`, expected instance of `"+s+"`.")}return null}return r(e)}function a(t){function e(e,r,n,o,i){var a=e[r];switch(!0){case a instanceof t:return null;case"Object"==l(a):var s=null;return t.serialize(a,function(t){return s=t},function(t){return e[r]=t}),s;default:var c=p[o],u=t.name||y;return new Error("Invalid "+c+" `"+i+"` of type `"+l(a)+"` supplied to `"+n+"`, expected instance of `"+u+"` or an `object`.")}}return r(e)}function s(t){function e(e,r,n,o,i){var a=e[r];switch(!0){case a instanceof t:return null;case Array.isArray(a):var s=null;return a.__environment={componentName:n,location:o,propFullName:i},t.serialize(a,function(t){return s=t},function(t){return e[r]=t}),s;default:var c=p[o],u=t.name||y;return new Error("Invalid "+c+" `"+i+"` of type `"+l(a)+"` supplied to `"+n+"`, expected instance of `"+u+"` or an `array`.")}}return r(e)}function c(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":e}function u(t){var e=c(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function l(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var f={array:n("array"),bool:n("boolean"),func:n("function"),number:n("number"),object:n("object"),string:n("string"),arrayOf:o,instanceOf:i,dictionary:a,collection:s},p={prop:"prop",context:"context",childContext:"child context"},y="<<anonymous>>";t.exports=f},function(t,e,r){"use strict";function Collection(t){if(this.constructor.hasOwnProperty("type")){var e=this.constructor.type;delete this.constructor.type,this.constructor.setType(e)}var r=this.constructor[i.dictionaryType];this.constructor[i.assertDictionaryTypeValid](r);var n=s(r,t,this.constructor.name);if(n instanceof Error){if(this.constructor[i.serializing]!==!0)throw n;this[i.serializationError]=n}else this[i.saveValidatedData](n)}var n=r(6),Dictionary=r(7),o=r(1),i=r(2),a=r(3),s=r(12);Collection.prototype=Object.create(Array.prototype,{constructor:{value:Collection,enumerable:!1,writable:!0,configurable:!0}}),Collection.extend=r(4),Collection.serialize=r(5),Collection[i.assertDictionaryTypeValid]=function(t){if("function"!=typeof t||t.prototype instanceof Dictionary==!1&&t!==Dictionary)throw o.iCollectionNoTypeDefined((void 0).constructor.name)},Collection.setType=a("setType","type",i.dictionaryType,Collection),Collection.prototype[i.saveValidatedData]=function(t){n(this,t),this.length=t.length},t.exports=Collection},function(t,e,r){(function(e){"use strict";function ImmutableDictionary(){Dictionary.apply(this,arguments)}var n,o=r(6),i=r(8),Dictionary=r(7),a=r(1),s=r(2),c=r(11),u=r(3);r(13);t.exports=ImmutableDictionary,ImmutableDictionary.extend=r(4),ImmutableDictionary.serialize=r(5),ImmutableDictionary.getTypeChecker=function(){return i.dictionary(this)},ImmutableDictionary.setSchema=u("setSchema","schema",s.schema,ImmutableDictionary),ImmutableDictionary.setDefaults=u("setDefaults","defaults",s.defaults,ImmutableDictionary),ImmutableDictionary[s.schema]={},ImmutableDictionary[s.defaults]={},o(ImmutableDictionary.prototype,c),ImmutableDictionary.prototype[s.saveValidatedData]=function(t){if(n=n||r(14)||e.Immutable,null==n)throw a.immutableJsUnavailable();this[s.underlyingIterable]=n.Map(t)},ImmutableDictionary.prototype.set=function(t,e,r){var n=this.constructor.schema[t];if(null==n)return this;var o=n([e],0,this.constructor.name,null,t);if(o)return"function"==typeof r&&r(o),this;this.constructor[s.skipInit]=!0;var i=new this.constructor;return this.constructor[s.skipInit]=!1,i[s.underlyingIterable]=this[s.underlyingIterable].set(t,e),i}}).call(e,function(){return this}())},function(t,e,r){"use strict";var n=r(2);t.exports={get:function(t,e){return this[n.underlyingIterable].get(t,e)},equals:function(t){return this[n.underlyingIterable].equals(t[n.underlyingIterable])},toMap:function(){return this[n.underlyingIterable].toMap()}}},function(t,e,r){"use strict";var n=r(1);t.exports=function(t,e,r){if(null==e||Array.isArray(e)===!1)throw n.collectionNoData(r);for(var o=null,i=0;i<e.length;i++){switch(!0){case e[i]instanceof t:break;default:if(null!=e.__environment){var a=e.__environment;o=t.getTypeChecker()(e,i,a.componentName,a.location,a.propFullName+"["+i+"]")}else o=t.getTypeChecker()(e,i,r)}if(null!=o)return o}return e}},function(t,e,r){"use strict";var n=r(1);t.exports=function(t,e,r,o){if(null==r||r instanceof Object==!1)throw n.dictionaryNoData(o);var i={};for(var a in t)if(t.hasOwnProperty(a)){null==r[a]?null!=e[a]&&(i[a]=e[a]):i[a]=r[a];var s=t[a](i,a,o);if(s)return s}return i}},function(e,r){e.exports=t},function(t,e,r){(function(e){"use strict";function ImmutableCollection(){Collection.apply(this,arguments)}var n,o=r(6),i=r(8),Collection=r(9),ImmutableDictionary=r(10),a=r(1),s=r(2),c=r(11),u=r(3);r(12);t.exports=ImmutableCollection,ImmutableCollection.extend=r(4),ImmutableCollection.serialize=r(5),ImmutableCollection[s.assertDictionaryTypeValid]=function(t){if("function"!=typeof t||t.prototype instanceof ImmutableDictionary==!1&&t!==ImmutableDictionary)throw a.iCollectionNoTypeDefined((void 0).constructor.name)},ImmutableCollection.getTypeChecker=function(){return i.collection(this)},ImmutableCollection.setType=u("setType","type",s.dictionaryType,ImmutableCollection),ImmutableCollection[s.dictionaryType]=ImmutableDictionary,o(ImmutableCollection.prototype,c),ImmutableCollection.prototype[s.saveValidatedData]=function(t){if(n=n||r(14)||e.Immutable,null==n)throw a.immutableJsUnavailable();this[s.underlyingIterable]=n.List(t)},ImmutableCollection.prototype.set=function(t,e,r){var n=i.immutableDictionary(this.constructor.type)(arguments,1,this.constructor.type.name);if(n)return"function"==typeof r&&r(n),this;this.constructor[s.skipInit]=!0;var o=new this.constructor;return this.constructor[s.skipInit]=!1,o[s.underlyingIterable]=this[s.underlyingIterable].set(t,arguments[1]),o}}).call(e,function(){return this}())},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8),Dictionary=r(7),Collection=r(9),ImmutableDictionary=r(10),ImmutableCollection=r(15),o={PropTypes:n,Dictionary:Dictionary,Collection:Collection,ImmutableDictionary:ImmutableDictionary,ImmutableCollection:ImmutableCollection};e.Castle=o,e.PropTypes=n,e.Dictionary=Dictionary,e.Collection=Collection,e.ImmutableDictionary=ImmutableDictionary,e.ImmutableCollection=ImmutableCollection}])});